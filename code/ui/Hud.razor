@using Sandbox;
@using Sandbox.UI;
@inherits PanelComponent

<root>
	<TimerPanel></TimerPanel>

	@foreach ( Player player in Scene.GetAllComponents<Player>() )
	{
		var screenPos = Scene.Camera.PointToScreenPixels(player.Position2D) * Panel.ScaleFromScreen;

		<Nametag style="left: @(screenPos.x)px; top: @(screenPos.y - 140)px;" Player=@player ></Nametag>

		@if(player.Network.IsOwner)
		{
			<InfoPanel Player=@player></InfoPanel>
			<StatusPanel Player=@player></StatusPanel>

			@if(player.IsChoosingLevelUpReward)
			{
				<ChoicePanel Player=@player></ChoicePanel>	
			}
		}
	}

	@{
		var hoveredStatus = Manager.Instance.HoveredStatus;
	}

	@if(hoveredStatus != null)
	{
		<StatusTooltip Status=@hoveredStatus style="left:@(Mouse.Position.x * Panel.ScaleFromScreen + 50)px; top:@(Mouse.Position.y * Panel.ScaleFromScreen - 50)px;"></StatusTooltip>
	}
</root>

@code
{
	protected override int BuildHash()
	{
		return System.HashCode.Combine(Time.Now);
	}
}
